<div class="row">

    <jhi-alert></jhi-alert>

    <purchase-line-entry class="col-md-4"
                     api="$ctrl.purchaseLineEntryApi"
                     purchase-id="$ctrl.purchase.id"
                     on-accept="$ctrl.acceptPurchaseLine(purchaseLine)"
                     on-delete="$ctrl.deletePurchaseLine(purchaseLine)">
    </purchase-line-entry>

    <div class="col-md-8">

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Purchase Items</h3>
            </div>
            <div class="panel-body">

                <p class="pull-right"><strong>Purchase Invoice # {{$ctrl.purchase.id}}</strong></p>

                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label" for="date">Date</label>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <input id="date" type="text" class="form-control" name="date"
                                       uib-datepicker-popup="{{dateformat}}" ng-model="$ctrl.purchase.date"
                                       is-open="$ctrl.datePickerOpenStatus.date"
                                       datepicker-options="$ctrl.datePickerOptions"
                                       required/>
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default"
                                            ng-click="$ctrl.openCalendar('date')">
                                        <i class="glyphicon glyphicon-calendar"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="vendor" class="col-sm-2 control-label">Vendor</label>
                        <div class=" col-sm-6">
                            <select class="form-control"
                                    id="vendor" name="vendor"
                                    ng-model="$ctrl.purchase.vendor"
                                    ng-options="vendor as vendor.name for vendor in $ctrl.vendors | orderBy: 'name' track by vendor.id">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="invoiceNumber" class="col-sm-2 control-label">Invoice #</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="invoiceNumber" ng-model="$ctrl.purchase.invoiceNumber">
                        </div>
                    </div>
                </form>
            </div>
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Code</th>
                    <th>Particular</th>
                    <th>Quantity</th>
                    <th>Rate</th>
                    <th>Amount</th>
                </tr>
                </thead>
                <thead>
                <tr ng-repeat="line in $ctrl.purchase.lines" ng-click="$ctrl.editPurchaseLine(line)">
                    <td>{{$index + 1}}</td>
                    <td>{{line.item.code}}</td>
                    <td>{{line.item.name}}</td>
                    <td>{{line.quantity}}</td>
                    <td>{{line.rate}}</td>
                    <td>{{line.amount}}</td>
                </tr>
                </thead>
            </table>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <form class="form-horizontal">
                            <div class="form-group">
                                <label for="subTotal" class="col-sm-6 control-label">Sub Total</label>
                                <div class="col-sm-6">
                                    <input type="number" class="form-control" id="subTotal" ng-value="$ctrl.subTotal"
                                           placeholder="0.00" readonly>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="discount" class="col-sm-6 control-label">Discount</label>
                                <div class="col-sm-6">
                                    <input type="number" ng-model="$ctrl.purchase.discount" class="form-control"
                                           id="discount" placeholder="0.00">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="grandTotal" class="col-sm-6 control-label">Grand Total</label>
                                <div class="col-sm-6">
                                    <input type="number" class="form-control" id="grandTotal" ng-value="$ctrl.total"
                                           placeholder="0.00" readonly>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-offset-6 col-md-6">
                        <div class="form-group">
                            <div class="pull-right">
                                <button type="reset" class="btn btn-default" ng-click="$ctrl.gotoPurchaseList()">
                                    <span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span>Cancel</span>
                                </button>
                                <button type="submit" class="btn btn-success" ng-click="$ctrl.updatePurchase()">
                                    <span class="glyphicon glyphicon-ok-circle"></span>&nbsp;<span>Accept</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
